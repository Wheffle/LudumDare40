<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_artifact</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>parent_item</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

mined = false;

upgrade_type = choose
(
    upgradetype.thrust,
    upgradetype.hp,
    upgradetype.firepower,
    upgradetype.firetime,
    upgradetype.bombsize,
    upgradetype.bombcharge
)

switch(upgrade_type)
{
    case upgradetype.thrust:
        portrait = portrait_thruster;
        name = "engine upgrade";
        break;
    
    case upgradetype.hp:
        portrait = portrait_armor;
        name = "armor upgrade";
        break;
    
    case upgradetype.firepower:   
        portrait = portrait_weapon;
        name = "bullet upgrade";
        break;        
        
    case upgradetype.firetime:
        name = "reloader upgrade";
        portrait = portrait_weapon;
        break;
        
    case upgradetype.bombsize:
        name = "pulse upgrade";
        portrait = portrait_bomb;
        break;
        
    case upgradetype.bombcharge:
        name = "recharger upgrade";
        portrait = portrait_bomb;
        break;
}

// Immediately settle on a surface
var grid_x = x div CELL;
var grid_y = 0;
do
{
    y++;
    grid_y = (y+8) div CELL;
}
until (terrain_get_cell(grid_x, grid_y) or y &gt; room_height)

falling = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>Item Get Event</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>switch(upgrade_type)
{
    case upgradetype.thrust:
        with(obj_player_properties)
        {
            thrust_force += 10;
            if(thrust_force &gt; 80) thrust_force = 80;
        }
        break;
    
    case upgradetype.hp:
        with(obj_player_properties)
        {
            hp_max += 10;
            with(obj_drone) hp += 10;
        }
        break;
    
    case upgradetype.firepower:   
        with(obj_player_properties)
        {
            firepower += 1;
            firespeed += 1;
            if (firespeed &gt; 10) firespeed = 10;
        }
        break;        
        
    case upgradetype.firetime:
        with(obj_player_properties)
        {
            fire_timer_set -= 6;
            if (fire_timer_set &lt; 5) fire_timer_set = 5;
        }
        break;
        
    case upgradetype.bombsize:
        with(obj_player_properties)
        {
            bombsize += 0.25;
        }
        break;
        
    case upgradetype.bombcharge:
        with(obj_player_properties)
        {
            bombcharge -= room_speed*2;
            if (bombcharge &lt; room_speed) bombcharge = room_speed;
        }
        break;
}

with(obj_drone) set_drone_properties();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>Item Pickup Event</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!mined)
{
    mined = true;
    
    danger_add(0.10);
    
    repeat(3)
    {
        var vfx = vfx_create_moon(x, y, 0.75, 0.25, 90, 30, 0.45, 0.05, c_maroon);
        vfx.image_speed = 0.25;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>1</PhysicsObjectShape>
  <PhysicsObjectDensity>0.200000002980232</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>1</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
